# DataBoard — Web-интерфейс для управления PostgreSQL

## Описание

**DataBoard** — это веб-приложение для администрирования баз данных PostgreSQL с удобным и понятным интерфейсом. Приложение позволяет просматривать структуру базы данных, выполнять SQL-запросы, редактировать данные и создавать резервные копии.

## Основные возможности

* Просмотр структуры базы данных и таблиц
* Редактирование данных через веб-интерфейс
* SQL-консоль с выполнением произвольных запросов
* Экспорт данных в Excel и JSON
* Полное резервное копирование и восстановление
* Архивирование таблиц с удалением из БД
* Управление зависимостями между таблицами

### Требования

* Docker
* Docker Compose

### Установка и запуск

```bash
# 1. Клонировать репозиторий
git clone <repository-url>
cd <project-folder>

# 2. Создать файлы переменных окружения
# В корне проекта:
echo "DB_HOST=postgres" > .env
echo "DB_PORT=5432" >> .env
echo "DB_NAME=AgroMonitoringDB" >> .env
echo "DB_USER=postgres" >> .env
echo "DB_PASSWORD=postgres" >> .env
echo "APP_HOST=0.0.0.0" >> .env
echo "APP_PORT=3000" >> .env

или

DB_HOST=postgres
DB_PORT=5432
DB_NAME=AgroMonitoringDB
DB_USER=postgres
DB_PASSWORD=postgres
APP_HOST=0.0.0.0
APP_PORT=3000

# В папке app:
cp .env app/.env

# 3. Запустить приложение
docker-compose up --build

# 4. Приложение будет доступно по адресу:
# http://localhost:3000
```

### Первоначальная настройка

> **Важно:** при первом запуске база данных пуста. Необходимо восстановить данные из бэкапа.

1. Откройте `http://localhost:3000`
2. Перейдите в раздел **«Сервисные функции»**
3. Нажмите **«Восстановление»**
4. Загрузите файл резервной копии (`.backup`)
5. Подтвердите восстановление
6. Обновите страницу — данные станут доступны

### Архитектура

* **FastAPI** — бэкенд
* **PostgreSQL** — база данных
* **Jinja2** — шаблонизация
* **HTMX** — динамические компоненты

### Основные компоненты

* `/` — дашборд с общей статистикой
* `/tables` — редактор таблиц
* `/sql` — SQL-консоль
* `/tools` — утилиты (резервное копирование, экспорт)

## Особенности

* Автоматическая проверка зависимостей при удалении данных
* Поддержка каскадного удаления
* Групповые операции с таблицами
* Интуитивный веб-интерфейс
* Журналирование операций
* Поддержка крупных данных (до 50 000 строк на экспорт)

## Безопасность

* Интерфейс работает внутри контейнера
* Отсутствует внешний доступ к базе данных
* Валидация SQL-запросов
* Проверка условий `WHERE`

## Лицензия

MIT License
